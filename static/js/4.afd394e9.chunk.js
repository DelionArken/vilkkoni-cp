(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{301:function(e,t,n){"use strict";n.r(t);var a=n(122),c=n(0),i=n(296),r=n(297),s=n(279),o=n(280),l=n(256),j=n(305),d=n(298),u=n(258),b=n(262),O=n(310),x=n(263),p=n(261),h=n(222),m=n.n(h),f=n(42),v=n(148),g=Object(v.a)((function(e){var t;return{root:{display:"flex"},drawer:Object(f.a)({},e.breakpoints.up("md"),{width:"240px",flexShrink:0}),appBar:(t={},Object(f.a)(t,e.breakpoints.up("md"),{width:"calc(100% - 240px)",marginLeft:"240px"}),Object(f.a)(t,"zIndex","200"),t),menuButton:Object(f.a)({marginRight:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:"240px"},content:{flexGrow:1,padding:e.spacing(3),position:"relative",display:"flex",flexDirection:"column",height:"100vh"},languages:{color:"#000"},tools:{justifyContent:"space-between"},loginCard:{justifyContent:"center",display:"flex",flexDirection:"column",alignSelf:"center",padding:"1rem"},loginContainer:{display:"flex",justifyContent:"center",height:"100vh"}}})),y=n(117),C=n(186),k=n(250),w=n(251),N=n(252),S=n(253),D=n(255),P=n(191),A=n.n(P),I=n(189),L=n.n(I),E=n(190),F=n.n(E),R=n(192),_=n.n(R),M=Object(v.a)((function(e){return{toolbar:e.mixins.toolbar,menuList:{fontVariantCaps:"petite-caps",color:"inherit",textDecoration:"none"}}})),T=n(4),B=n(257),z=n(9),W=function(e){var t=e.logout,n=M(),a=Object(T.g)(),c=Object(T.h)(),i=function(e){a.push({pathname:e,search:c.search})};return Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:n.toolbar}),Object(z.jsx)(k.a,{}),Object(z.jsxs)(w.a,{className:n.menuList,children:[Object(z.jsxs)(N.a,{button:!0,onClick:function(){i("/")},children:[Object(z.jsx)(S.a,{children:Object(z.jsx)(L.a,{})}),Object(z.jsx)(D.a,{primary:"Manage events"})]},"Inspect"),Object(z.jsxs)(N.a,{button:!0,onClick:function(){i("/create")},children:[Object(z.jsx)(S.a,{children:Object(z.jsx)(F.a,{})}),Object(z.jsx)(D.a,{primary:"Create event"})]},"create"),Object(z.jsxs)(N.a,{button:!0,onClick:function(){i("/news")},children:[Object(z.jsx)(S.a,{children:Object(z.jsx)(B.a,{})}),Object(z.jsx)(D.a,{primary:"Newsletter"})]},"news"),Object(z.jsxs)(N.a,{button:!0,onClick:function(){i("/statistics")},children:[Object(z.jsx)(S.a,{children:Object(z.jsx)(A.a,{})}),Object(z.jsx)(D.a,{primary:"Statistics"})]},"stats")]}),Object(z.jsx)(k.a,{}),Object(z.jsx)(w.a,{className:n.menuList,children:Object(z.jsxs)(N.a,{button:!0,onClick:function(){return t()},children:[Object(z.jsx)(S.a,{children:Object(z.jsx)(_.a,{color:"secondary"})}),Object(z.jsx)(D.a,{primary:"Logout"})]},"logout")})]})},G=n(33),V=n(272),J=n(281),K=n(306),H=n(300),U=n(151),Y=n.n(U),q=Object(v.a)((function(e){return{fileInput:{width:"97%",margin:"10px 0"},createForm:{},titles:{marginBottom:"1rem"},inputField:{minWidth:"50%"}}})),Q=n(113),X=n.n(Q),Z=n(260),$=n(302),ee=n(195),te=n.n(ee),ne=n(194),ae=n.n(ne),ce=n(193),ie=n.n(ce),re=n.p+"static/media/placeholder.157f088b.png",se=Object(v.a)((function(e){return{media:Object(f.a)({paddingTop:"50%",position:"relative",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},e.breakpoints.up("md"),{width:"30%",paddingTop:0}),border:{border:"solid"},card:Object(f.a)({display:"flex",borderRadius:"15px",height:"auto",position:"relative",flexDirection:"column"},e.breakpoints.up("md"),{flexDirection:"row"}),content:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"space-between"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},overlay3:{position:"absolute",bottom:"20px",left:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px",marginBottom:"5px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"},bodyContent:{whiteSpace:"pre-line"}}}));Q.extend(ie.a);var oe=function(e){var t=e.event,n=se();return Object(z.jsxs)(u.a,{className:n.card,children:[Object(z.jsx)(Z.a,{className:n.media,image:t.image?t.image:re,title:t.title}),Object(z.jsxs)($.a,{className:n.content,children:[Object(z.jsxs)("div",{className:n.overlay,children:[Object(z.jsx)(l.a,{variant:"h6",children:t.creator}),Object(z.jsx)(l.a,{variant:"body2",children:Q(t.createdDate).fromNow()})]}),t.lastModified?Object(z.jsx)("div",{className:n.overlay3,children:Object(z.jsxs)(l.a,{variant:"body2",children:["Modified: ",Q(t.lastModified).format("LLL")]})}):null,Object(z.jsx)("div",{className:n.overlay2,children:Object(z.jsx)(p.a,{style:{color:"white"},size:"small",onClick:function(){},children:Object(z.jsx)(ae.a,{fontSize:"default",color:"primary"})})}),Object(z.jsx)("div",{className:n.details,children:Object(z.jsx)(l.a,{variant:"body2",color:"textSecondary",children:t.tags.map((function(e){return"#".concat(e," ")}))})}),Object(z.jsx)(l.a,{className:n.title,variant:"h4",gutterBottom:!0,children:t.title}),Object(z.jsxs)(l.a,{className:n.title,variant:"h6",gutterBottom:!0,children:["When: [",Q(t.beginDate).format("LLL"),"]"]}),Object(z.jsxs)(l.a,{className:n.title,variant:"h6",gutterBottom:!0,children:["Where: ",t.location]}),Object(z.jsx)(b.a,{children:Object(z.jsx)(l.a,{variant:"h6",color:"textSecondary",component:"p",className:n.bodyContent,children:t.message})}),Object(z.jsxs)(x.a,{className:n.cardActions,children:[Object(z.jsxs)(l.a,{children:["Room for ",t.maxPartCount-t.partCount," people"]}),Object(z.jsxs)(l.a,{children:["Pricing: ",t.price?t.price:0," \u20ac"]}),Object(z.jsxs)(p.a,{size:"medium",variant:"contained",color:"primary",align:"right",onClick:function(){},children:[Object(z.jsx)(te.a,{fontSize:"small"}),"\xa0 Enter \xa0"]})]})]})]})},le=n(264),je=n(269),de=n(270),ue=n(271),be=function(e){var t=e.open,n=e.handleCancel,a=e.handleAccept,c=e.notify;return Object(z.jsxs)(le.a,{open:t,children:[Object(z.jsx)(je.a,{children:"Are you sure?"}),Object(z.jsxs)(de.a,{children:["This will make the event available ",c?" and notify all current subscribers":" but will not notify subscribers"]}),Object(z.jsxs)(ue.a,{children:[Object(z.jsx)(p.a,{color:"secondary",variant:"outlined",onClick:n,children:"Cancel"}),Object(z.jsx)(p.a,{color:"primary",variant:"contained",onClick:a,children:"Accept"})]})]})},Oe=n(41),xe=n(153),pe=n.n(xe),he=n(154),me=n(14),fe=n(197),ve=n.n(fe),ge="https://vilkkoni-server.herokuapp.com/user",ye=function(e){return ve.a.post("".concat(ge,"/login"),e)},Ce=function(e){return ve.a.get("".concat(ge,"/").concat(e,"/events"))},ke=function(e,t){return ve.a.post("".concat(ge,"/").concat(e,"/events"),t)},we=function(e,t,n){return ve.a.patch("".concat(ge,"/").concat(e,"/events/").concat(t),n)},Ne=function(e,t){return ve.a.delete("".concat(ge,"/").concat(e,"/events/").concat(t))},Se=function(e,t,n){return ve.a.patch("".concat(ge,"/").concat(e,"/events/").concat(t,"/signups"),n)},De=function(e,t){return ve.a.post("".concat(ge,"/").concat(e,"/news"),t)},Pe=function(e){return ve.a.get("".concat(ge,"/").concat(e,"/news"))},Ae=function(e,t){return function(){var n=Object(he.a)(pe.a.mark((function n(a){return pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ye({api:e});case 3:t({status:200},e),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t({status:401},e);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},Ie=function(e){var t=e.api_key,n=q(),i=Object(Oe.b)(),r=Object(c.useState)({creator:"Vilkkoni",title:"",message:"",location:"",tags:[""],image:"",maxPartCount:3,partCount:0,price:0,beginDate:X()().toDate()}),s=Object(a.a)(r,2),o=s[0],j=s[1],d=Object(c.useState)(!0),u=Object(a.a)(d,2),b=u[0],x=u[1],h=Object(c.useState)(!1),m=Object(a.a)(h,2),f=m[0],v=m[1],g=function(){j({creator:"Vilkkoni",title:"",message:"",location:"",tags:[""],image:"",maxPartCount:3,partCount:0,price:0,beginDate:X()().toDate()})};return Object(z.jsxs)("div",{children:[Object(z.jsx)(be,{open:f,handleCancel:function(){v(!1)},handleAccept:function(){var e,n;i((e=t,n=o,function(){var t=Object(he.a)(pe.a.mark((function t(a){var c,i;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke(e,n);case 3:c=t.sent,i=c.data,a({type:me.a,payload:i}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())),v(!1),g()},notify:b}),Object(z.jsx)(l.a,{className:n.titles,variant:"h5",children:"Create a new event"}),Object(z.jsx)("form",{className:n.createForm,children:Object(z.jsxs)(V.a,{container:!0,direction:"column",spacing:3,children:[Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:n.inputField,variant:"outlined",label:"Title",value:o.title,onChange:function(e){return j(Object(G.a)(Object(G.a)({},o),{},{title:e.target.value}))}})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:n.inputField,variant:"outlined",label:"Content",multiline:!0,rows:4,inputProps:{style:{resize:"both"}},value:o.message,onChange:function(e){return j(Object(G.a)(Object(G.a)({},o),{},{message:e.target.value}))}})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:n.inputField,variant:"outlined",label:"Location",value:o.location,onChange:function(e){return j(Object(G.a)(Object(G.a)({},o),{},{location:e.target.value}))}})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:n.inputField,variant:"outlined",label:"Search tags, comma-delimited",value:o.tags,onChange:function(e){return j(Object(G.a)(Object(G.a)({},o),{},{tags:e.target.value.split(",")}))}})}),Object(z.jsxs)(V.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"flex-start",children:[Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{variant:"outlined",label:"Participant count",type:"number",value:o.maxPartCount,style:{marginRight:"2rem"},onChange:function(e){return j(Object(G.a)(Object(G.a)({},o),{},{maxPartCount:e.target.value}))}})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(H.a,{label:"Date and time",value:o.beginDate,style:{marginRight:"2rem"},onChange:function(e){return j(Object(G.a)(Object(G.a)({},o),{},{beginDate:e}))},ampm:!1})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{variant:"outlined",label:"Ticket price",type:"number",value:o.price,onChange:function(e){return j(Object(G.a)(Object(G.a)({},o),{},{price:e.target.value}))}})})]}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsxs)("div",{className:n.fileInput,children:[Object(z.jsx)(l.a,{children:"Select image for the event:"}),Object(z.jsx)(Y.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return j(Object(G.a)(Object(G.a)({},o),{},{image:t}))}})]})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(J.a,{control:Object(z.jsx)(K.a,{checked:b,onChange:function(e){x(!b)}}),label:"Notify subsribers on this event"})}),Object(z.jsxs)(V.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"flex-start",children:[Object(z.jsx)(V.a,{item:!0,style:{marginRight:"2rem"},children:Object(z.jsx)(p.a,{variant:"outlined",color:"secondary",onClick:g,children:"Clear"})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(p.a,{variant:"contained",color:"primary",onClick:function(){v(!0)},children:"Submit"})})]})]})}),Object(z.jsxs)("div",{style:{marginTop:"3rem"},children:[Object(z.jsx)(l.a,{className:n.titles,variant:"h5",children:"Preview"}),Object(z.jsx)(oe,{event:o})]})]})},Le=n(282),Ee=n(259),Fe=n(167),Re=Object(v.a)((function(e){return{root:{},eventCard:{borderRadius:"0",display:"flex",flexDirection:"row"},cardActions:{marginLeft:"auto"},editMenu:{width:"100%",height:"100vh",position:"absolute",top:0,left:0,display:"flex"},toolbar:e.mixins.toolbar,editContent:{flexGrow:1,padding:e.spacing(3),position:"relative",display:"flex",flexDirection:"column"},editTitle:{display:"flex"},editID:{marginLeft:"auto"},inputField:{minWidth:"50%"},fileInput:{width:"97%",margin:"10px 0"},editForm:{marginTop:"1rem"},partData:{marginTop:"1rem"},content:{display:"inline-flex",justifyContent:"space-between",width:"100%"},contentData:{textAlign:"center"}}})),_e=n(283),Me=n(284),Te=n(293),Be=n(294),ze=n(295),We=function(e){var t=e.api_key,n=e.ID,i=e.open,r=e.cancel,s=Re(),o=Object(Oe.b)(),j=Object(Oe.c)((function(e){return n?e.events.find((function(e){return e._id===n})):null})),d=Object(c.useState)({creator:"Vilkkoni",title:"",message:"",location:"",tags:[""],image:"",price:0,maxPartCount:3,partCount:0,beginDate:Q().toDate(),lastModified:Q().toDate()}),u=Object(a.a)(d,2),b=u[0],x=u[1],h=Object(c.useState)(!0),m=Object(a.a)(h,2),f=m[0],v=m[1];Object(c.useEffect)((function(){j&&x(j)}),[j]);return Object(z.jsx)(Le.a,{direction:"left",in:i,className:s.editMenu,mountOnEnter:!0,unmountOnExit:!0,children:Object(z.jsx)(Ee.a,{children:Object(z.jsxs)("div",{className:s.editContent,children:[Object(z.jsx)("div",{className:s.toolbar}),Object(z.jsxs)(V.a,{container:!0,spacing:3,children:[Object(z.jsx)(V.a,{item:!0,children:Object(z.jsxs)(p.a,{variant:"contained",onClick:r,children:[Object(z.jsx)(_e.a,{}),"Back"]})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(l.a,{variant:"h4",children:"Edit Event"})}),Object(z.jsx)(V.a,{item:!0,className:s.editID,children:Object(z.jsxs)(l.a,{variant:"body2",children:["(ID: ",n,")"]})})]}),Object(z.jsx)("form",{className:s.editForm,onSubmit:function(e){e.preventDefault(),n&&o(function(e,t,n){return function(){var a=Object(he.a)(pe.a.mark((function a(c){var i,r;return pe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,we(e,t,n);case 3:i=a.sent,r=i.data,c({type:me.f,payload:r}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,b)),r()},children:Object(z.jsxs)(V.a,{container:!0,direction:"column",spacing:3,children:[Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:s.inputField,variant:"outlined",label:"Title",value:b.title,onChange:function(e){return x(Object(G.a)(Object(G.a)({},b),{},{title:e.target.value}))}})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:s.inputField,variant:"outlined",label:"Content",multiline:!0,rows:4,inputProps:{style:{resize:"both"}},value:b.message,onChange:function(e){return x(Object(G.a)(Object(G.a)({},b),{},{message:e.target.value}))}})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:s.inputField,variant:"outlined",label:"Location",value:b.location,onChange:function(e){return x(Object(G.a)(Object(G.a)({},b),{},{location:e.target.value}))}})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:s.inputField,variant:"outlined",label:"Search tags, comma-delimited",value:b.tags,onChange:function(e){return x(Object(G.a)(Object(G.a)({},b),{},{tags:e.target.value.split(",")}))}})}),Object(z.jsxs)(V.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"flex-start",children:[Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{variant:"outlined",label:"Participant count",type:"number",value:b.maxPartCount,style:{marginRight:"2rem"},onChange:function(e){return x(Object(G.a)(Object(G.a)({},b),{},{maxPartCount:e.target.value}))}})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(H.a,{label:"Date and time",value:b.beginDate,style:{marginRight:"2rem"},onChange:function(e){return x(Object(G.a)(Object(G.a)({},b),{},{beginDate:e}))},ampm:!1})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{variant:"outlined",label:"Ticket price",type:"number",value:b.price,onChange:function(e){return x(Object(G.a)(Object(G.a)({},b),{},{price:e.target.value}))}})})]}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsxs)("div",{className:s.fileInput,children:[Object(z.jsx)(l.a,{children:"Select image for the event:"}),Object(z.jsx)(Y.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return x(Object(G.a)(Object(G.a)({},b),{},{image:t}))}})]})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(J.a,{control:Object(z.jsx)(K.a,{checked:f,onChange:function(e){v(!f)}}),label:"Notify subscribers about this change"})}),Object(z.jsx)(V.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"flex-start",children:Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(p.a,{variant:"contained",color:"primary",type:"submit",children:"Save"})})})]})})]})})})},Ge=[{field:"name",headerName:"Name",flex:1},{field:"email",headerName:"Email",flex:1},{field:"phone",headerName:"Phone Number",flex:1},{field:"count",headerName:"Count",flex:1},{field:"additional",headerName:"Additional Information",flex:1},{field:"subscribed",headerName:"Subscribed",flex:1,type:"boolean"}],Ve=function(e){var t=0;return e.forEach((function(e){e.id=t,t++})),e},Je=function(e){var t=e.api_key,n=e.open,i=e.ID,r=e.cancel,s=Re(),o=Object(Oe.c)((function(e){return i?e.events.find((function(e){return e._id===i})):null})),l=Object(c.useState)([]),j=Object(a.a)(l,2),d=j[0],u=j[1],b=Object(Oe.b)();return i?Object(z.jsx)(Le.a,{direction:"left",in:n,className:s.editMenu,mountOnEnter:!0,unmountOnExit:!0,children:Object(z.jsx)(Ee.a,{children:Object(z.jsxs)("div",{className:s.editContent,children:[Object(z.jsx)("div",{className:s.toolbar}),Object(z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(z.jsxs)(p.a,{variant:"contained",onClick:r,children:[Object(z.jsx)(_e.a,{}),"Back"]}),Object(z.jsxs)(p.a,{variant:"contained",color:"secondary",onClick:function(){if(d.length>0){var e=o.participants.filter((function(e,t){return d.includes(t)})).map((function(e){return e._id}));b((n=t,a=i,c=e,function(){var e=Object(he.a)(pe.a.mark((function e(t){var i;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(n,a,c);case 3:i=e.sent,console.log(i.status),t({type:me.c,payload:{event:a,parts:c}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),u([])}var n,a,c},disabled:!d.length,children:[Object(z.jsx)(Me.a,{}),"Remove Selected"]})]}),Object(z.jsx)(Fe.a,{components:{Toolbar:Fe.b},className:s.partData,columns:Ge,rows:Ve(o.participants.slice()),checkboxSelection:!0,disableSelectionOnClick:!0,sortModel:[{field:"name",sort:"asc"}],onSelectionModelChange:function(e){u(e.selectionModel)},selectionModel:d})]})})}):null},Ke=function(e){var t=e.open,n=e.cancel,a=e.deleteEvent;return Object(z.jsxs)(le.a,{open:t,children:[Object(z.jsx)(je.a,{children:"Cancel this event?"}),Object(z.jsx)(de.a,{children:"Are you sure you want to cancel this event? All participants will be notified of this action. You cannot recover this event after deletion."}),Object(z.jsxs)(ue.a,{style:{justifyContent:"space-between"},children:[Object(z.jsx)(p.a,{color:"primary",variant:"contained",onClick:n,children:"Go Back"}),Object(z.jsxs)(p.a,{color:"secondary",variant:"contained",onClick:a,children:[Object(z.jsx)(Me.a,{}),"Delete"]})]})]})},He=function(e){var t=e.api_key,n=Re(),i=Object(Oe.b)(),r=Object(c.useState)(400),s=Object(a.a)(r,2),o=s[0],j=s[1],d=Object(c.useState)(null),O=Object(a.a)(d,2),h=O[0],m=O[1],f=Object(c.useState)(!1),v=Object(a.a)(f,2),g=v[0],y=v[1],C=Object(c.useState)(!1),w=Object(a.a)(C,2),N=w[0],S=w[1],D=Object(Oe.c)((function(e){return e.events})),P=Object(c.useState)(!1),A=Object(a.a)(P,2),I=A[0],L=A[1];Object(c.useEffect)((function(){var e,n;i((e=t,n=E,function(){var t=Object(he.a)(pe.a.mark((function t(a){var c,i;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ce(e);case 3:c=t.sent,i=c.data,a({type:me.d,payload:i}),n({status:200}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n({status:401}),console.log(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[t,i]);var E=function(e){j(e.status)};return Object(z.jsxs)("div",{className:n.root,children:[Object(z.jsx)(V.a,{container:!0,direction:"column",spacing:2,children:200===o?D.length?D.map((function(e){return Object(z.jsx)(V.a,{item:!0,children:Object(z.jsxs)(u.a,{className:n.eventCard,children:[Object(z.jsxs)(b.a,{className:n.content,children:[Object(z.jsx)(l.a,{className:n.contentData,variant:"h5",children:e.title}),Object(z.jsx)(k.a,{orientation:"vertical"}),Object(z.jsx)(l.a,{className:n.contentData,variant:"h5",children:Q(e.beginDate).format("LLL")})]}),Object(z.jsxs)(x.a,{className:n.cardActions,children:[Object(z.jsx)(p.a,{variant:"contained",disabled:!0,children:Object(z.jsx)(Te.a,{})}),Object(z.jsx)(p.a,{variant:"contained",onClick:function(){m(e._id),S(!0)},children:Object(z.jsx)(Be.a,{})}),Object(z.jsx)(p.a,{variant:"contained",onClick:function(){m(e._id),y(!0)},children:Object(z.jsx)(ze.a,{})}),Object(z.jsx)(p.a,{variant:"contained",color:"secondary",onClick:function(){m(e._id),L(!0)},children:Object(z.jsx)(Me.a,{})})]})]})},e._id)})):Object(z.jsx)(l.a,{children:"No events found"}):401===o?Object(z.jsx)(l.a,{children:"Invalid API key"}):Object(z.jsx)(l.a,{children:"Either still loading or an error, please be patient"})}),Object(z.jsx)(We,{api_key:t,ID:h,open:g,cancel:function(){y(!1),m(null)}}),Object(z.jsx)(Ke,{open:I,cancel:function(){L(!1),m(null)},deleteEvent:function(){var e,n;i((e=t,n=h,function(){var t=Object(he.a)(pe.a.mark((function t(a){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ne(e,n);case 3:a({type:me.b,payload:n}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())),L(!1),m(null)}}),Object(z.jsx)(Je,{api_key:t,open:N,ID:h,cancel:function(){S(!1),m(null)}})]})},Ue=function(e){var t=e.open,n=e.handleCancel,a=e.handleAccept;return Object(z.jsxs)(le.a,{open:t,children:[Object(z.jsx)(je.a,{children:"Are you sure?"}),Object(z.jsx)(de.a,{children:"This will send en email to all your current subscribers."}),Object(z.jsxs)(ue.a,{children:[Object(z.jsx)(p.a,{color:"secondary",variant:"outlined",onClick:n,children:"Cancel"}),Object(z.jsx)(p.a,{color:"primary",variant:"contained",onClick:a,children:"Accept"})]})]})},Ye=Object(v.a)((function(e){return{titles:{marginBottom:"1rem",display:"inline-flex"},inputField:{minWidth:"50%"},newsContainer:{display:"flex",flexDirection:"column",flexGrow:1},oldData:{margin:"1rem 0",display:"flex",flexGrow:1,minHeight:"50vh"}}})),qe=[{field:"createdAt",headerName:"Date",flex:.2,type:"date"},{field:"title",headerName:"Title",flex:.5},{field:"content",headerName:"Content",flex:1}],Qe=function(e){var t=e.api_key,n=Ye(),i=Object(Oe.b)(),r=Object(c.useState)({title:"",content:""}),s=Object(a.a)(r,2),o=s[0],j=s[1],d=Object(c.useState)(!1),u=Object(a.a)(d,2),b=u[0],x=u[1],h=Object(Oe.c)((function(e){return e.news.map((function(e,t){return e.id?e:Object(G.a)(Object(G.a)({},e),{},{id:t,createdAt:new Date(e.createdAt)})}))}));Object(c.useEffect)((function(){var e;i((e=t,function(){var t=Object(he.a)(pe.a.mark((function t(n){var a,c;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pe(e);case 3:a=t.sent,c=a.data,n({type:me.e,payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()))}),[i,t]);var m=function(){j({title:"",content:""})};return Object(z.jsxs)("div",{className:n.newsContainer,children:[Object(z.jsx)(Ue,{open:b,handleCancel:function(){x(!1)},handleAccept:function(){var e,n;i((e=t,n=o,function(){var t=Object(he.a)(pe.a.mark((function t(a){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,De(e,n);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())),x(!1),m()}}),Object(z.jsxs)("div",{children:[Object(z.jsx)(l.a,{className:n.titles,variant:"h5",children:"Post a newsletter - \xa0"}),Object(z.jsx)(l.a,{className:n.titles,variant:"h5",color:"secondary",children:" WORK IN PROGRESS"})]}),Object(z.jsx)("form",{className:n.createForm,children:Object(z.jsxs)(V.a,{container:!0,direction:"column",spacing:3,children:[Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:n.inputField,variant:"outlined",label:"Title",value:o.title,onChange:function(e){return j(Object(G.a)(Object(G.a)({},o),{},{title:e.target.value}))}})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(O.a,{className:n.inputField,variant:"outlined",label:"Content",multiline:!0,rows:7,inputProps:{style:{resize:"both"}},value:o.content,onChange:function(e){return j(Object(G.a)(Object(G.a)({},o),{},{content:e.target.value}))}})}),Object(z.jsxs)(V.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"flex-start",children:[Object(z.jsx)(V.a,{item:!0,style:{marginRight:"2rem"},children:Object(z.jsx)(p.a,{variant:"outlined",color:"secondary",onClick:m,children:"Clear"})}),Object(z.jsx)(V.a,{item:!0,children:Object(z.jsx)(p.a,{variant:"contained",color:"primary",onClick:function(){""!==o.title&&""!==o.content&&x(!0),console.log(h)},children:"Submit"})})]})]})}),Object(z.jsx)(l.a,{variant:"h5",style:{marginTop:"2rem"},children:"Old Newsletters"}),Object(z.jsx)("div",{className:n.oldData,children:Object(z.jsx)(Fe.a,{columns:qe,rows:h,disableSelectionOnClick:!0,sortModel:[{field:"createdAt",sort:"asc"}]})})]})},Xe=n(299),Ze=n(224),$e=n(46),et=n(220),tt=n.n(et);n(221);Q.extend(tt.a),Q.locale("fi");t.default=function(){var e=g(),t=Object(c.useState)(""),n=Object(a.a)(t,2),h=n[0],f=n[1],v=Object(c.useState)(""),k=Object(a.a)(v,2),w=k[0],N=k[1],S=Object(c.useState)(!1),D=Object(a.a)(S,2),P=D[0],A=D[1],I=Object(c.useState)(!1),L=Object(a.a)(I,2),E=L[0],F=L[1],R=Object(c.useState)(!1),_=Object(a.a)(R,2),M=_[0],B=_[1],G=Object(Oe.b)(),V=Object(c.useState)(!1),J=Object(a.a)(V,2),K=J[0],H=J[1],U=new Ze.a,Y=function(){H(!K)},q=function(e,t){B(!1),200===e.status?(A(!0),F(!1),U.set("token",t,{maxAge:259200,sameSite:"strict",secure:!0,path:"/"})):(F(!0),A(!1),U.remove("token",{maxAge:259200,sameSite:"strict",secure:!0,path:"/"}))};Object(c.useLayoutEffect)((function(){var e=U.get("token");!P&&e&&""!==e&&(B(!0),N(e),G(Ae(e,q)))}),[]);var Q=function(){N(""),A(!1),F(!1),U.remove("token",{maxAge:259200,sameSite:"strict",secure:!0,path:"/"})},X=void 0!==window?function(){return document.body}:void 0;return P?Object(z.jsxs)("div",{className:e.root,children:[Object(z.jsx)(i.a,{}),Object(z.jsx)(r.a,{position:"fixed",className:e.appBar,children:Object(z.jsxs)(s.a,{className:e.tools,children:[Object(z.jsx)(o.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:Y,className:e.menuButton,children:Object(z.jsx)(m.a,{})}),Object(z.jsx)(l.a,{variant:"h6",noWrap:!0,children:"Vilkkoni Control Panel"})]})}),Object(z.jsxs)("nav",{className:e.drawer,children:[Object(z.jsx)(j.a,{mdUp:!0,implementation:"js",children:Object(z.jsx)(d.a,{container:X,variant:"temporary",anchor:"left",open:K,onClose:Y,classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0},children:Object(z.jsx)(W,{logout:Q})})}),Object(z.jsx)(j.a,{smDown:!0,implementation:"js",children:Object(z.jsx)(d.a,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0,children:Object(z.jsx)(W,{logout:Q})})})]}),Object(z.jsxs)("main",{className:e.content,children:[Object(z.jsx)("div",{className:e.toolbar}),Object(z.jsx)(y.a,{utils:C.a,children:Object(z.jsxs)(T.d,{children:[Object(z.jsx)(T.b,{exact:!0,path:"/",children:Object(z.jsx)(He,{api_key:w})}),Object(z.jsx)(T.b,{exact:!0,path:"/create",children:Object(z.jsx)(Ie,{api_key:w})}),Object(z.jsx)(T.b,{exact:!0,path:"/news",children:Object(z.jsx)(Qe,{api_key:w})}),Object(z.jsx)(T.b,{exact:!0,path:"/statistics",children:Object(z.jsx)(l.a,{variant:"h5",color:"secondary",children:"WORK IN PROGRESS"})}),Object(z.jsx)(T.b,{path:"*",children:Object(z.jsx)(T.a,{to:"/"})})]})})]})]}):M?Object(z.jsx)($e.a,{}):Object(z.jsx)("div",{className:e.loginContainer,children:Object(z.jsxs)(u.a,{className:e.loginCard,children:[Object(z.jsx)(l.a,{children:"Enter credentials"}),Object(z.jsx)(b.a,{children:Object(z.jsx)(O.a,{variant:"outlined",value:h,label:"Password",type:"password",autoComplete:"current-password",onChange:function(e){return f(e.target.value)},error:E})}),Object(z.jsx)(x.a,{children:Object(z.jsxs)(p.a,{variant:"contained",color:"primary",onClick:function(){N(h),B(!0),G(Ae(h,q))},children:["Log in \xa0",Object(z.jsx)(Xe.a,{})]})})]})})}}}]);
//# sourceMappingURL=4.afd394e9.chunk.js.map